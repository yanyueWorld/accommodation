(function(e){function t(t){for(var o,r,i=t[0],s=t[1],c=t[2],u=0,m=[];u<i.length;u++)r=i[u],l[r]&&m.push(l[r][0]),l[r]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);d&&d(t);while(m.length)m.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],o=!0,i=1;i<a.length;i++){var s=a[i];0!==l[s]&&(o=!1)}o&&(n.splice(t--,1),e=r(r.s=a[0]))}return e}var o={},l={app:0},n=[];function r(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=o,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(a,o,function(t){return e[t]}.bind(null,o));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var d=s;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"45db":function(e,t,a){"use strict";var o=a("95ac"),l=a.n(o);l.a},"56d7":function(e,t,a){"use strict";a.r(t);a("7f7f"),a("cadf"),a("551c"),a("f751"),a("097d");var o=a("2b0e"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("index")],1)},n=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content"},[a("span",[a("a",{attrs:{href:"#"}},[e._v("四川民宿电商平台")])])])]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content"})]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content"},[a("span",[a("a",{attrs:{href:"javascript:void(0)","v-text":e.accountName},on:{click:e.modifyInfo}},[e._v(e._s(e.accountName))])]),a("span",[a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.loginOutClick()}}},[e._v("退出")])])])])],1)],1),a("el-container",{staticStyle:{height:"870px"}},[a("el-aside",{staticStyle:{"border-right":"1px lightgrey solid"},attrs:{width:"202px"}},[a("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{height:"870px"},attrs:{"default-active":"2","background-color":"#4682B4","text-color":"#fff","active-text-color":"#ffd04b",router:""},on:{open:e.handleOpen,close:e.handleClose}},[e._l(e.a,function(t){return void 0!==t.children&&0!=t.children.length?a("el-submenu",{key:t.resourceId,attrs:{index:t.url}},[a("template",{slot:"title"},[a("i",{staticClass:"fas",class:t.icon,staticStyle:{}}),e._v(" \n            "),a("span",[e._v(e._s(t.resourceName))])]),e._l(t.children,function(t){return a("el-menu-item",{key:t.resourceId,attrs:{index:t.url},on:{click:function(a){return e.addTab(e.editableTabsValue2,t.resourceName,t.url)}}},[a("i",{staticClass:"fas",class:t.icon}),e._v("\n             \n            "+e._s(t.resourceName)+"\n          ")])})],2):e._e()}),e._l(e.a,function(t){return void 0===t.children||0===t.children.length?a("el-menu-item",{key:t.resourceId,attrs:{name:t.resourceName,index:t.url},on:{click:function(a){return e.addTab(e.editableTabsValue2,t.resourceName,t.url)}}},[a("i",{staticClass:"fas",class:t.icon}),e._v("\n           \n          "+e._s(t.resourceName)+"\n        ")]):e._e()})],2)],1),a("el-container",[a("el-main",{staticStyle:{"background-color":"#F6F8FA"}},[a("el-tabs",{staticStyle:{height:"800px","background-color":"#F6F8FA"},attrs:{type:"border-card",closable:""},on:{"tab-remove":e.removeTab,"tab-click":e.tabClick},model:{value:e.editableTabsValue2,callback:function(t){e.editableTabsValue2=t},expression:"editableTabsValue2"}},e._l(e.editableTabs2,function(t){return a("el-tab-pane",{key:t.name,attrs:{label:t.title,name:t.name,url:t.url}},[e._v("\n            "+e._s(t.content)+"\n            "),a("router-view")],1)}),1)],1)],1)],1),a("el-footer",[e._v("©2019 四川民宿电商平台后台管理系统")]),a("el-dialog",{attrs:{title:"个人信息修改",id:"modifyInfo",visible:e.infoModifyDialog},on:{"update:visible":function(t){e.infoModifyDialog=t}}},[a("el-form",{attrs:{model:e.infoModifyForm}},[a("el-row",{attrs:{gutter:80}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"账户id"}},[a("el-input",{attrs:{disabled:""},model:{value:e.infoModifyForm.accountId,callback:function(t){e.$set(e.infoModifyForm,"accountId",t)},expression:"infoModifyForm.accountId"}})],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"账户名"}},[a("el-input",{attrs:{clearable:""},model:{value:e.infoModifyForm.accountName,callback:function(t){e.$set(e.infoModifyForm,"accountName",t)},expression:"infoModifyForm.accountName"}})],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{clearable:""},model:{value:e.infoModifyForm.password,callback:function(t){e.$set(e.infoModifyForm,"password",t)},expression:"infoModifyForm.password"}})],1)],1)],1),a("el-row",{attrs:{gutter:80}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"真实姓名"}},[a("el-input",{attrs:{disabled:""},model:{value:e.infoModifyForm.name,callback:function(t){e.$set(e.infoModifyForm,"name",t)},expression:"infoModifyForm.name"}})],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"性别"}},[a("el-input",{attrs:{disabled:""},model:{value:e.infoModifyForm.gender,callback:function(t){e.$set(e.infoModifyForm,"gender",t)},expression:"infoModifyForm.gender"}})],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"出生日期"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",clearable:""},model:{value:e.infoModifyForm.birth,callback:function(t){e.$set(e.infoModifyForm,"birth",t)},expression:"infoModifyForm.birth"}})],1)],1)],1),a("el-row",{attrs:{gutter:80}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"身份证号码"}},[a("el-input",{attrs:{disabled:""},model:{value:e.infoModifyForm.idNumber,callback:function(t){e.$set(e.infoModifyForm,"idNumber",t)},expression:"infoModifyForm.idNumber"}})],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"电话号码"}},[a("el-input",{attrs:{clearable:""},model:{value:e.infoModifyForm.telephone,callback:function(t){e.$set(e.infoModifyForm,"telephone",t)},expression:"infoModifyForm.telephone"}})],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"余额"}},[a("el-input",{attrs:{disabled:""},model:{value:e.infoModifyForm.remainderMoney,callback:function(t){e.$set(e.infoModifyForm,"remainderMoney",t)},expression:"infoModifyForm.remainderMoney"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.infoModifyDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmModifyInfo}},[e._v("确 定")])],1)],1)],1)},i=[],s=(a("ac6a"),a("bc3a")),c=a.n(s),d={getMenuTree:function(){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/getAccountPower")}},u={logoutClick:function(){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/account/logout")}},m={getAccount:function(){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/account/getAccountName")}},p={findAllUsers:function(e,t,a,o,l,n){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/account/getAccountsByExample?limit="+t+"&page="+a,{roleId:e,accountName:o,name:l,telphone:n})},modifyUsers:function(e){return c.a.default.withCredentials=!0,c.a.post("http://localhost/account/modify",e)},addUser:function(e,t){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/account/insert?roleId="+t,e)}},f=a("5118"),g={name:"index",data:function(){return{a:null,editableTabsValue2:"2",editableTabs2:[{title:"首页",name:"1",url:"/index"}],tabIndex:1,accountName:"",infoModifyDialog:!1,infoModifyForm:{accountId:"",accountName:"",gender:"",idNumber:"",name:"",password:"",remainderMoney:"",telephone:"",birth:""}}},methods:{handleOpen:function(e,t){window.console.log(e,t)},handleClose:function(e,t){window.console.log(e,t)},getMenuTree:function(){var e=this;d.getMenuTree().then(function(t){0==t.data.length&&e.$alert("登录信息失效，请重新登录","提醒",{confirmButtonText:"确定",callback:function(){e.$message({type:"info",message:"跳转中，请稍后"}),Object(f["setTimeout"])(function(){window.location.href="http://localhost/login.html"},"1000")}}),e.a=t.data,window.console.log(e.a)})},getAccount:function(){var e=this;m.getAccount().then(function(t){window.console.log(t),e.accountName=t.data.accountName})},loginOutClick:function(){window.console.log("退出");var e=this;e.$confirm("确定退出？","退出",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"info",message:"退出成功,将跳转至登录页面"}),u.logoutClick().then(function(e){window.console.log(e)}),Object(f["setTimeout"])(function(){window.location.href="http://localhost/login.html"},"1000")}).catch(function(){e.$message({type:"info",message:"已取消退出"})})},addTab:function(e,t,a){window.console.log("editableTabs2==>",this.editableTabs2);for(var o=0;o<this.editableTabs2.length;o++){if(this.editableTabs2[o].url===a){window.console.log("exist");var l=this.editableTabs2[o];window.console.log("thisTab==>",l);var n=this.editableTabsValue2;window.console.log("activeName==>",n),n=l.name,this.$router.push({path:a})}else{var r=++this.tabIndex+"";this.editableTabs2.push({title:t,name:r,url:a}),this.editableTabsValue2=r}break}},tabClick:function(e){window.console.log("tab",e.$attrs.url),this.$router.push({path:e.$attrs.url})},removeTab:function(e){var t=this;window.console.log("remove");var a=this.editableTabs2,o=this.editableTabsValue2;o===e&&a.forEach(function(l,n){if(l.name===e){var r=a[n+1]||a[n-1];window.console.log("nextTab==>",r),window.console.log(r.url),r&&(o=r.name,t.$router.push({path:r.url}),r--)}}),this.editableTabsValue2=o,this.editableTabs2=a.filter(function(t){return t.name!==e})},modifyInfo:function(){window.console.log(this.accountName),this.infoModifyDialog=!0;var e=this;m.getAccount().then(function(t){e.infoModifyForm=t.data})},confirmModifyInfo:function(){this.infoModifyDialog=!1;var e=this;p.modifyUsers(this.infoModifyForm).then(function(t){t.data<=0?e.$message.error("修改失败"):e.$message({type:"success",message:"修改成功"})})}},mounted:function(){this.getMenuTree(),this.getAccount()}},h=g,b=(a("45db"),a("2877")),w=Object(b["a"])(h,r,i,!1,null,null,null),v=w.exports,y={components:{index:v}},x=y,k=Object(b["a"])(x,l,n,!1,null,null,null),N=k.exports,A=a("5c96"),I=a.n(A),$=(a("0fae"),a("cb5b")),F=a("da3e"),C=a("faaa"),D=a("42b9"),M=a("8c4f"),_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.accountName,callback:function(t){e.accountName=t},expression:"accountName"}})],1),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{type:"text",placeholder:"请输入姓名"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{type:"text",placeholder:"请输入电话号码"},model:{value:e.telphone,callback:function(t){e.telphone=t},expression:"telphone"}})],1),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{icon:"el-icon-search",circle:""},on:{click:e.search}})],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{icon:"el-icon-plus",circle:""},on:{click:e.add}}),a("el-dialog",{staticStyle:{top:"-120px"},attrs:{title:"新增顾客",id:"modify",visible:e.addDialog,center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.addDialog=t}}},[a("el-form",{ref:"formAddRule",attrs:{model:e.formAdd,rules:e.rules}},[a("el-form-item",{attrs:{label:"账户名",prop:"accountName"}},[a("el-input",{model:{value:e.formAdd.accountName,callback:function(t){e.$set(e.formAdd,"accountName",t)},expression:"formAdd.accountName"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:e.formAdd.password,callback:function(t){e.$set(e.formAdd,"password",t)},expression:"formAdd.password"}})],1),a("el-form-item",{attrs:{label:"真实姓名",prop:"name"}},[a("el-input",{model:{value:e.formAdd.name,callback:function(t){e.$set(e.formAdd,"name",t)},expression:"formAdd.name"}})],1),a("el-form-item",{attrs:{label:"身份证号码",prop:"idNumber"}},[a("el-input",{model:{value:e.formAdd.idNumber,callback:function(t){e.$set(e.formAdd,"idNumber",t)},expression:"formAdd.idNumber"}})],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:e.formAdd.gender,callback:function(t){e.$set(e.formAdd,"gender",t)},expression:"formAdd.gender"}},[a("el-radio",{attrs:{label:"男"}}),a("el-radio",{attrs:{label:"女"}})],1)],1),a("el-form-item",{attrs:{label:"出生日期"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.formAdd.birth,callback:function(t){e.$set(e.formAdd,"birth",t)},expression:"formAdd.birth"}})],1)],1),a("el-form-item",{attrs:{label:"电话号码",prop:"telphone"}},[a("el-input",{model:{value:e.formAdd.telphone,callback:function(t){e.$set(e.formAdd,"telphone",e._n(t))},expression:"formAdd.telphone"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancleAdd}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmAdd("formAddRule")}}},[e._v("确 定")])],1)],1)],1)],1),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","element-loading-text":e.loadingText,"element-loading-background":"rgba(0, 0, 0, 0.8)","default-sort":{prop:"accountId",order:"ascending"}}},[a("el-table-column",{attrs:{prop:"accountId",label:"账户id",align:"center",width:"150",sortable:""}}),a("el-table-column",{attrs:{prop:"accountName",label:"账户名",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"gender",label:"性别",align:"center",width:"100"}}),a("el-table-column",{attrs:{prop:"birth",label:"出生日期",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"telephone",label:"电话号码",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"remainderMoney",label:"余额",align:"center",width:"150"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left",title:"身份证号码",trigger:"click"}},[a("el-input",{attrs:{disabled:""},model:{value:e.idNumber,callback:function(t){e.idNumber=t},expression:"idNumber"}}),a("el-button",{attrs:{slot:"reference",size:"mini",icon:"el-icon-info",type:"info"},on:{click:function(a){return e.showIdNumber(t.$index,t.row)}},slot:"reference"},[e._v("查看")])],1),e._v(" \n          "),a("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-dialog",{staticStyle:{top:"-120px"},attrs:{title:"修改信息",id:"modify",visible:e.dialogFormVisible,center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"账户id"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.accountId,callback:function(t){e.$set(e.form,"accountId",t)},expression:"form.accountId"}})],1),a("el-form-item",{attrs:{label:"账户名"}},[a("el-input",{model:{value:e.form.accountName,callback:function(t){e.$set(e.form,"accountName",t)},expression:"form.accountName"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"真实姓名"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[a("el-radio",{attrs:{label:"男"}}),a("el-radio",{attrs:{label:"女"}})],1)],1),a("el-form-item",{attrs:{label:"出生日期"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.birth,callback:function(t){e.$set(e.form,"birth",t)},expression:"form.birth"}})],1)],1),a("el-form-item",{attrs:{label:"电话号码"}},[a("el-input",{model:{value:e.form.telphone,callback:function(t){e.$set(e.form,"telphone",t)},expression:"form.telphone"}})],1),a("el-form-item",{attrs:{label:"余额"}},[a("el-input",{model:{value:e.form.remainderMoney,callback:function(t){e.$set(e.form,"remainderMoney",t)},expression:"form.remainderMoney"}})],1),a("el-form-item",{attrs:{label:"状态",hidden:""}},[a("el-input",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancleModify}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmModify}},[e._v("确 定")])],1)],1),e._v(" \n          "),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row,e.tableData)}}},[e._v("删除")])]}}])})],1)],1),a("el-row",[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},T=[],S={name:"customer",data:function(){return{tableData:[{accountId:"",accountName:"",name:"",gender:"",birth:"",telephone:"",remainderMoney:""}],currentPage:1,total:0,pageSize:"",loading:!0,loadingText:"加载中……",accountName:"",name:"",telphone:"",idNumber:"",form:{accountId:"",accountName:"",name:"",gender:"",birth:"",telphone:"",remainderMoney:"",password:""},formAdd:{accountId:"",accountName:"",name:"",gender:"",birth:"",telphone:"",remainderMoney:"",password:""},dialogFormVisible:!1,addDialog:!1,rules:{accountName:[{required:!0,message:"请输入账户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:15,message:"请输入正确的真实姓名，长度在2-15个字符",trigger:"blur"}],idNumber:[{required:!0,message:"请输入身份证信息",trigger:"blur"},{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"请输入正确的身份证号码",trigger:"blur"}],telphone:[{required:!0,message:"请输入电话号码",trigger:"blur"},{type:"number",message:"请输入正确的电话号码",trigger:"blur"}]}}},methods:{customerTable:function(){var e=this;p.findAllUsers(3,5,1,null,null,null).then(function(t){var a=t.data.data,o=t.data.count;window.console.log("total==>",o),window.console.log(a),e.tableData=a,e.total=o,e.idNumber=t.data.data.idNumber,e.pageSize=5,e.loading=!1})},handleCurrentChange:function(e){var t=this;t.loading=!0,window.console.log("当前页：",e),window.console.log("页面大小:",t.pageSize),p.findAllUsers(3,t.pageSize,e,null,null,null).then(function(a){var o=a.data.data,l=a.data.count;t.tableData=o,t.total=l,t.currentPage=e,t.loading=!1})},handleSizeChange:function(e){window.console.log(e);var t=this;t.loading=!0,p.findAllUsers(3,e,1,null,null,null).then(function(a){var o=a.data.data,l=a.data.count;t.tableData=o,t.total=l,t.pageSize=e,t.loading=!1})},search:function(){var e=this;e.loading=!0,p.findAllUsers(3,e.pageSize,1,this.accountName,this.name,this.telphone).then(function(t){var a=t.data.data,o=t.data.count;e.tableData=a,e.total=o,e.loading=!1})},add:function(){window.console.log("add"),this.addDialog=!0},confirmAdd:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;window.console.log("确认添加");var a=t;p.addUser(t.formAdd,"3").then(function(e){window.console.log("res==>",e),a.loadingText="新增中……",a.customerTable(),e.data>0?(window.console.log("添加成功"),a.$message({message:"添加成功",type:"success"}),a.addDialog=!1):a.$message.error("添加失败")})})},cancleAdd:function(){window.console.log("取消"),this.addDialog=!1},showIdNumber:function(e,t){var a=this;a.idNumber=t.idNumber},handleEdit:function(e,t){window.console.log("index==>",e),window.console.log("row==>",t),this.dialogFormVisible=!0,this.form.accountId=t.accountId,this.form.accountName=t.accountName,this.form.birth=t.birth,this.form.gender=t.gender,this.form.idNumber=t.idNumber,this.form.name=t.name,this.form.remainderMoney=t.remainderMoney,this.form.telphone=t.telephone,this.form.password=t.password,this.form.birth=t.birth},confirmModify:function(){window.console.log("确认修改");var e=this;p.modifyUsers(this.form).then(function(){e.loading=!0,e.loadingText="修改中……",e.dialogFormVisible=!1,e.handleCurrentChange(e.currentPage),e.$message({message:"修改成功",type:"success"})})},cancleModify:function(){window.console.log("取消修改"),this.dialogFormVisible=!1},handleDelete:function(e,t,a){window.console.log("index==>",e),window.console.log("row==>",t);var o=this;this.$confirm("确认删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.form.accountId=t.accountId,o.form.status=1,window.console.log(o.form),p.modifyUsers(o.form).then(function(){a.splice(e,1)}),o.$message({type:"success",message:"删除成功"})}).catch(function(){o.$message({type:"info",message:"取消删除"})})}},mounted:function(){this.customerTable()}},z=S,P=Object(b["a"])(z,_,T,!1,null,null,null),V=P.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.accountName,callback:function(t){e.accountName=t},expression:"accountName"}})],1),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{type:"text",placeholder:"请输入姓名"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{type:"text",placeholder:"请输入电话号码"},model:{value:e.telphone,callback:function(t){e.telphone=t},expression:"telphone"}})],1),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{icon:"el-icon-search",circle:""},on:{click:e.search}})],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{icon:"el-icon-plus",circle:""},on:{click:e.add}}),a("el-dialog",{staticStyle:{top:"-120px"},attrs:{title:"新增商家",id:"modify",visible:e.addDialog,center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.addDialog=t}}},[a("el-form",{ref:"formAddRule",attrs:{model:e.formAdd,rules:e.rules}},[a("el-form-item",{attrs:{label:"账户名",prop:"accountName"}},[a("el-input",{model:{value:e.formAdd.accountName,callback:function(t){e.$set(e.formAdd,"accountName",t)},expression:"formAdd.accountName"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:e.formAdd.password,callback:function(t){e.$set(e.formAdd,"password",t)},expression:"formAdd.password"}})],1),a("el-form-item",{attrs:{label:"真实姓名",prop:"name"}},[a("el-input",{model:{value:e.formAdd.name,callback:function(t){e.$set(e.formAdd,"name",t)},expression:"formAdd.name"}})],1),a("el-form-item",{attrs:{label:"身份证号码",prop:"idNumber"}},[a("el-input",{model:{value:e.formAdd.idNumber,callback:function(t){e.$set(e.formAdd,"idNumber",t)},expression:"formAdd.idNumber"}})],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:e.formAdd.gender,callback:function(t){e.$set(e.formAdd,"gender",t)},expression:"formAdd.gender"}},[a("el-radio",{attrs:{label:"男"}}),a("el-radio",{attrs:{label:"女"}})],1)],1),a("el-form-item",{attrs:{label:"出生日期"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.formAdd.birth,callback:function(t){e.$set(e.formAdd,"birth",t)},expression:"formAdd.birth"}})],1)],1),a("el-form-item",{attrs:{label:"电话号码",prop:"telphone"}},[a("el-input",{model:{value:e.formAdd.telphone,callback:function(t){e.$set(e.formAdd,"telphone",e._n(t))},expression:"formAdd.telphone"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancleAdd}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmAdd("formAddRule")}}},[e._v("确 定")])],1)],1)],1)],1),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","element-loading-text":e.loadingText,"element-loading-background":"rgba(0, 0, 0, 0.8)","default-sort":{prop:"accountId",order:"ascending"}}},[a("el-table-column",{attrs:{prop:"accountId",label:"账户id",align:"center",width:"150",sortable:""}}),a("el-table-column",{attrs:{prop:"accountName",label:"账户名",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"gender",label:"性别",align:"center",width:"100"}}),a("el-table-column",{attrs:{prop:"birth",label:"出生日期",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"telephone",label:"电话号码",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"remainderMoney",label:"余额",align:"center",width:"150"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left",title:"身份证号码",trigger:"click"}},[a("el-input",{attrs:{disabled:""},model:{value:e.idNumber,callback:function(t){e.idNumber=t},expression:"idNumber"}}),a("el-button",{attrs:{slot:"reference",size:"mini",icon:"el-icon-info",type:"info"},on:{click:function(a){return e.showIdNumber(t.$index,t.row)}},slot:"reference"},[e._v("查看")])],1),e._v(" \n          "),a("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-dialog",{staticStyle:{top:"-120px"},attrs:{title:"修改信息",id:"modify",visible:e.dialogFormVisible,center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"账户id"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.accountId,callback:function(t){e.$set(e.form,"accountId",t)},expression:"form.accountId"}})],1),a("el-form-item",{attrs:{label:"账户名"}},[a("el-input",{model:{value:e.form.accountName,callback:function(t){e.$set(e.form,"accountName",t)},expression:"form.accountName"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"真实姓名"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[a("el-radio",{attrs:{label:"男"}}),a("el-radio",{attrs:{label:"女"}})],1)],1),a("el-form-item",{attrs:{label:"出生日期"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.birth,callback:function(t){e.$set(e.form,"birth",t)},expression:"form.birth"}})],1)],1),a("el-form-item",{attrs:{label:"电话号码"}},[a("el-input",{model:{value:e.form.telphone,callback:function(t){e.$set(e.form,"telphone",t)},expression:"form.telphone"}})],1),a("el-form-item",{attrs:{label:"余额"}},[a("el-input",{model:{value:e.form.remainderMoney,callback:function(t){e.$set(e.form,"remainderMoney",t)},expression:"form.remainderMoney"}})],1),a("el-form-item",{attrs:{label:"状态",hidden:""}},[a("el-input",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancleModify}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmModify}},[e._v("确 定")])],1)],1),e._v(" \n          "),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row,e.tableData)}}},[e._v("删除")])]}}])})],1)],1),a("el-row",[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},B=[],U={name:"manager",data:function(){return{tableData:[{accountId:"",accountName:"",name:"",gender:"",birth:"",telephone:"",remainderMoney:""}],currentPage:1,total:0,pageSize:"",loading:!0,loadingText:"加载中……",accountName:"",name:"",telphone:"",idNumber:"",form:{accountId:"",accountName:"",name:"",gender:"",birth:"",telphone:"",remainderMoney:"",password:""},formAdd:{accountId:"",accountName:"",name:"",gender:"",birth:"",telphone:"",remainderMoney:"",password:""},dialogFormVisible:!1,addDialog:!1,rules:{accountName:[{required:!0,message:"请输入账户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:15,message:"请输入正确的真实姓名，长度在2-15个字符",trigger:"blur"}],idNumber:[{required:!0,message:"请输入身份证信息",trigger:"blur"},{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"请输入正确的身份证号码",trigger:"blur"}],telphone:[{required:!0,message:"请输入电话号码",trigger:"blur"},{type:"number",message:"请输入正确的电话号码",trigger:"blur"}]}}},methods:{customerTable:function(){var e=this;p.findAllUsers(2,5,1,null,null,null).then(function(t){var a=t.data.data,o=t.data.count;window.console.log("total==>",o),window.console.log(a),e.tableData=a,e.total=o,e.idNumber=t.data.data.idNumber,e.pageSize=5,e.loading=!1})},handleCurrentChange:function(e){var t=this;t.loading=!0,window.console.log("当前页：",e),window.console.log("页面大小:",t.pageSize),p.findAllUsers(2,t.pageSize,e,null,null,null).then(function(a){var o=a.data.data,l=a.data.count;t.tableData=o,t.total=l,t.currentPage=e,t.loading=!1})},handleSizeChange:function(e){window.console.log(e);var t=this;t.loading=!0,p.findAllUsers(2,e,1,null,null,null).then(function(a){var o=a.data.data,l=a.data.count;t.tableData=o,t.total=l,t.pageSize=e,t.loading=!1})},search:function(){var e=this;e.loading=!0,p.findAllUsers(3,e.pageSize,1,this.accountName,this.name,this.telphone).then(function(t){var a=t.data.data,o=t.data.count;e.tableData=a,e.total=o,e.loading=!1})},add:function(){window.console.log("add"),this.addDialog=!0},confirmAdd:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;window.console.log("确认添加");var a=t;p.addUser(t.formAdd,"3").then(function(e){window.console.log("res==>",e),a.loadingText="新增中……",a.customerTable(),e.data>0?(window.console.log("添加成功"),a.$message({message:"添加成功",type:"success"}),a.addDialog=!1):a.$message.error("添加失败")})})},cancleAdd:function(){window.console.log("取消"),this.addDialog=!1},showIdNumber:function(e,t){var a=this;a.idNumber=t.idNumber},handleEdit:function(e,t){window.console.log("index==>",e),window.console.log("row==>",t),this.dialogFormVisible=!0,this.form.accountId=t.accountId,this.form.accountName=t.accountName,this.form.birth=t.birth,this.form.gender=t.gender,this.form.idNumber=t.idNumber,this.form.name=t.name,this.form.remainderMoney=t.remainderMoney,this.form.telphone=t.telephone,this.form.password=t.password,this.form.birth=t.birth},confirmModify:function(){window.console.log("确认修改");var e=this;p.modifyUsers(this.form).then(function(){e.loading=!0,e.loadingText="修改中……",e.handleCurrentChange(e.currentPage),e.dialogFormVisible=!1}),e.$message({message:"修改成功",type:"success"})},cancleModify:function(){window.console.log("取消修改"),this.dialogFormVisible=!1},handleDelete:function(e,t,a){window.console.log("index==>",e),window.console.log("row==>",t);var o=this;this.$confirm("确认删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.form.accountId=t.accountId,o.form.status=1,o.form.accountName=t.accountName,o.form.gender=t.gender,o.form.birth=t.birth,o.form.telphone=t.telphone,o.form.remainderMoney=t.remainderMoney,o.form.password=t.password,o.form.name=t.name,window.console.log(o.form),p.modifyUsers(o.form).then(function(){a.splice(e,1)}),o.$message({type:"success",message:"删除成功"})}).catch(function(){o.$message({type:"info",message:"取消删除"})})}},mounted:function(){this.customerTable()}},j=U,R=Object(b["a"])(j,O,B,!1,null,null,null),E=R.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-form",{attrs:{model:e.searchForm}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入账户名",clearable:""},model:{value:e.searchForm.accountName,callback:function(t){e.$set(e.searchForm,"accountName",t)},expression:"searchForm.accountName"}})],1),a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{placeholder:"请选择评价类型",clearable:""},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},e._l(e.types,function(e){return a("el-option",{key:e.typeId,attrs:{value:e.typeValue,label:e.typeValue}})}),1)],1),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{icon:"el-icon-search",circle:""},on:{click:e.search}})],1)],1)],1),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:"","element-loading-text":e.loadingText,"element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-table-column",{attrs:{prop:"messageId",label:"id",align:"center"}}),a("el-table-column",{attrs:{prop:"accountName",label:"账户名",align:"center"}}),a("el-table-column",{attrs:{prop:"serviceRank",label:"服务等级",align:"center"}}),a("el-table-column",{attrs:{prop:"customerRank",label:"客户等级",align:"center"}}),a("el-table-column",{attrs:{prop:"livingRank",label:"居住等级",align:"center"}}),a("el-table-column",{attrs:{prop:"message",label:"留言",align:"center"}}),a("el-table-column",{attrs:{prop:"type",label:"评价类型",align:"center"}})],1)],1),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},K=[],Y={getAll:function(e,t,a){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/message/getAll?limit="+e+"&page="+t,a)}},L={name:"message",data:function(){return{loading:!1,loadingText:"加载中……",searchForm:{accountName:null,type:null},types:[{typeId:"0",typeValue:"服务评价"},{type:"1",typeValue:"整体评价"},{type:"2",typeValue:"顾客评价"}],tableData:[{messageId:null,accountName:null,serviceRank:null,livingRank:null,message:null,customerRank:null,type:null}],currentPage:1,total:0,pageSize:""}},methods:{search:function(){window.console.log("搜索",this.searchForm);var e=this;this.loading=!0,this.loadingText="搜索中……",Y.getAll(5,1,this.searchForm).then(function(t){e.tableData=t.data.data,e.total=t.data.count,e.loading=!1,e.loadingText="加载中……"})},messageTable:function(){window.console.log("表格加载");var e=this;this.loading=!0,Y.getAll(5,1,this.searchForm).then(function(t){e.tableData=t.data.data,e.total=t.data.count,e.loading=!1})},handleSizeChange:function(e){window.console.log("改变页面大小",e);var t=this;t.loading=!0,Y.getAll(e,1,this.searchForm).then(function(e){var a=e.data.data,o=e.data.count;t.tableData=a,t.total=o,t.loading=!1})},handleCurrentChange:function(e){window.console.log("改变页数",e);var t=this;t.loading=!0,window.console.log("当前页：",e),window.console.log("页面大小:",t.pageSize),Y.getAll(t.pageSize,e,t.searchForm).then(function(a){var o=a.data.data,l=a.data.count;t.tableData=o,t.total=l,t.currentPage=e,t.loading=!1})}},mounted:function(){this.messageTable()}},H=L,X=Object(b["a"])(H,q,K,!1,null,null,null),J=X.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:30}},[a("el-form",{attrs:{model:e.searchForm}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入订单号",clearable:""},model:{value:e.searchForm.orderId,callback:function(t){e.$set(e.searchForm,"orderId",t)},expression:"searchForm.orderId"}})],1),a("el-col",{attrs:{span:5}},[a("el-select",{attrs:{placeholder:"请选择状态",clearable:""},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},e._l(e.statusSelect,function(e){return a("el-option",{key:e.statusId,attrs:{value:e.statusValue,label:e.statusValue}})}),1)],1),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{icon:"el-icon-search",circle:""},on:{click:e.search}})],1)],1)],1),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","element-loading-text":e.loadingText,"element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-table-column",{attrs:{prop:"orderId",label:"订单id",align:"center",width:"150",sortable:""}}),a("el-table-column",{attrs:{prop:"apartmentName",label:"公寓名",align:"center",width:"150"}}),a("el-table-column",{attrs:{prop:"accountName",label:"账户名",align:"center",width:"150"}}),a("el-table-column",{attrs:{prop:"prePay",label:"定金",align:"center",width:"150"}}),a("el-table-column",{attrs:{prop:"price",label:"单价",align:"center",width:"150"}}),a("el-table-column",{attrs:{prop:"checkInDate",label:"入住时间",align:"center",width:"150",sortable:""}}),a("el-table-column",{attrs:{prop:"checkOutDate",label:"退房时间",align:"center",width:"150",sortable:""}}),a("el-table-column",{attrs:{prop:"total",label:"总额",align:"center",width:"150",sortable:""}}),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center",width:"150"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-dialog",{attrs:{title:"修改入住时间",visible:e.modifyDialogForm},on:{"update:visible":function(t){e.modifyDialogForm=t}}},[a("el-form",{attrs:{model:e.modifyForm}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.modifyForm.checkInDate,callback:function(t){e.$set(e.modifyForm,"checkInDate",t)},expression:"modifyForm.checkInDate"}}),e._v("——\n              "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.modifyForm.checkOutDate,callback:function(t){e.$set(e.modifyForm,"checkOutDate",t)},expression:"modifyForm.checkOutDate"}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancleModify}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmModify}},[e._v("确 定")])],1)],1),e._v(" \n          "),a("el-button",{attrs:{size:"mini",icon:"el-icon-close"},on:{click:function(a){return e.handleDel(t.$index,t.row)}}},[e._v("关闭")])]}}])})],1)],1),a("el-row",[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},W=[],Q=a("bd86"),Z={getAll:function(e,t,a){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/order/getAll?limit="+e+"&page="+t,a)},closeOrder:function(e){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/order/delete",e)},update:function(e){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/order/update",e)}},ee={name:"order",data:function(){var e;return{loading:!1,loadingText:"加载中…………",searchForm:{orderId:"",status:null},statusSelect:[{statusId:"1",statusValue:"已预订"},{statusId:"0",statusValue:"已关闭"},{statusId:"2",statusValue:"已完成"}],tableData:[{orderId:"",apartmentName:"",accountName:"",prePay:"",price:"",checkInDate:"",checkOutDate:"",total:"",status:""}],modifyDialogForm:!1,modifyForm:(e={checkInDate:""},Object(Q["a"])(e,"checkInDate",""),Object(Q["a"])(e,"orderId",""),e),currentPage:1,total:0,pageSize:""}},methods:{search:function(){window.console.log("searchForm==>",this.searchForm);var e=this;this.loading=!0,this.loadingText="搜索中……",Z.getAll(5,1,this.searchForm).then(function(t){e.tableData=t.data.data,e.total=t.data.count,e.loading=!1})},orderTable:function(){var e=this;this.loading=!0,Z.getAll(5,1,this.searchForm).then(function(t){window.console.log(t),e.tableData=t.data.data,e.total=t.data.count,e.loading=!1})},handleEdit:function(e,t){window.console.log("index==>",e),window.console.log("row==>",t),this.modifyDialogForm=!0,this.modifyForm.checkInDate=t.checkInDate,this.modifyForm.checkOutDate=t.checkOutDate,this.modifyForm.orderId=t.orderId},cancleModify:function(){this.modifyDialogForm=!1,this.$message({type:"info",message:"已取消关闭"})},confirmModify:function(){var e=this;Z.update(this.modifyForm).then(function(t){1==t.data?(e.modifyDialogForm=!1,e.loadingText="修改中……",e.handleCurrentChange(e.currentPage),e.$message({type:"success",message:"修改成功"})):e.$message.error("修改失败")})},handleDel:function(e,t){var a=this,o=this;window.console.log("index==>",e),window.console.log("row==>",t),this.$confirm("关闭订单","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Z.closeOrder(t).then(function(e){1==e.data&&(o.$message({type:"success",message:"关闭成功"}),o.orderTable()),e.data<=0&&o.$message.error("关闭失败")})}).catch(function(){a.$message({type:"info",message:"取消关闭"})})},handleSizeChange:function(e){window.console.log(e);var t=this;t.loading=!0,Z.getAll(e,1,this.searchForm).then(function(e){var a=e.data.data,o=e.data.count;t.tableData=a,t.total=o,t.loading=!1})},handleCurrentChange:function(e){var t=this;t.loading=!0,window.console.log("当前页：",e),window.console.log("页面大小:",t.pageSize),Z.getAll(t.pageSize,e,t.searchForm).then(function(a){var o=a.data.data,l=a.data.count;t.tableData=o,t.total=l,t.currentPage=e,t.loading=!1})}},mounted:function(){this.orderTable()}},te=ee,ae=Object(b["a"])(te,G,W,!1,null,null,null),oe=ae.exports,le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:17}},[a("el-form",{attrs:{model:e.searchForm}},[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入民宿名",clearable:""},model:{value:e.searchForm.appartmentName,callback:function(t){e.$set(e.searchForm,"appartmentName",t)},expression:"searchForm.appartmentName"}})],1),a("el-col",{attrs:{span:5}},[a("el-cascader",{staticStyle:{width:"300px"},attrs:{size:"large",options:e.options,placeholder:"请选择地区",clearable:""},on:{change:e.handleChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1),a("el-col",{attrs:{span:7}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入最低金额",clearable:""},model:{value:e.searchForm.beginPrice,callback:function(t){e.$set(e.searchForm,"beginPrice",t)},expression:"searchForm.beginPrice"}}),e._v("——\n        "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入最高金额",clearable:""},model:{value:e.searchForm.endPrice,callback:function(t){e.$set(e.searchForm,"endPrice",t)},expression:"searchForm.endPrice"}})],1),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{icon:"el-icon-search",circle:""},on:{click:e.search}})],1),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{icon:"el-icon-plus",circle:""},on:{click:e.add}}),a("el-dialog",{attrs:{title:"新增民宿",id:"addAppartment",visible:e.addAppartmentDialog,center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.addAppartmentDialog=t}}},[a("el-form",{attrs:{model:e.addForm}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"民宿名"}},[a("el-input",{attrs:{clearable:""},model:{value:e.addForm.appartmentName,callback:function(t){e.$set(e.addForm,"appartmentName",t)},expression:"addForm.appartmentName"}})],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"价格"}},[a("el-input",{attrs:{clearable:""},model:{value:e.addForm.price,callback:function(t){e.$set(e.addForm,"price",t)},expression:"addForm.price"}})],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"民宿类别"}},[a("el-select",{attrs:{clearable:""},on:{change:function(t){return e.getAttr(e.addForm.classId)}},model:{value:e.addForm.classId,callback:function(t){e.$set(e.addForm,"classId",t)},expression:"addForm.classId"}},e._l(e.classes,function(e){return a("el-option",{key:e.classId,attrs:{label:e.className,value:e.classId}})}),1)],1)],1)],1),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"民宿类型"}},[a("el-select",{attrs:{clearable:""},model:{value:e.addForm.typeId,callback:function(t){e.$set(e.addForm,"typeId",t)},expression:"addForm.typeId"}},e._l(e.type,function(e){return a("el-option",{key:e.typeId,attrs:{label:e.typeName,value:e.typeId}})}),1)],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"民宿属性"}},[a("el-select",{attrs:{clearable:""},on:{change:function(t){return e.getValues(e.addForm.attrId)}},model:{value:e.addForm.attrId,callback:function(t){e.$set(e.addForm,"attrId",t)},expression:"addForm.attrId"}},e._l(e.attr,function(e){return a("el-option",{key:e.attrId,attrs:{label:e.attrName,value:e.attrId}})}),1)],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"特殊风格"}},[a("el-select",{attrs:{clearable:"",multiple:"",filterable:"","allow-create":""},model:{value:e.addForm.valId,callback:function(t){e.$set(e.addForm,"valId",t)},expression:"addForm.valId"}},e._l(e.values,function(e){return a("el-option",{key:e.valueId,attrs:{label:e.valueName,value:e.valueId}})}),1)],1)],1)],1),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"请选择地区"}},[a("el-cascader",{attrs:{size:"large",options:e.areas},on:{change:e.changeAreas},model:{value:e.selectedAreas,callback:function(t){e.selectedAreas=t},expression:"selectedAreas"}})],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"请输入详细地址"}},[a("el-input",{attrs:{clearable:""},model:{value:e.addForm.stree,callback:function(t){e.$set(e.addForm,"stree",t)},expression:"addForm.stree"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"房主"}},[a("el-select",{attrs:{clearable:""},model:{value:e.addForm.owner,callback:function(t){e.$set(e.addForm,"owner",t)},expression:"addForm.owner"}},e._l(e.owners,function(e){return a("el-option",{key:e.accountId,attrs:{label:e.accountName,value:e.accountId}})}),1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeShowInfo}},[e._v("关闭")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addBtn}},[e._v("确认")])],1)],1)],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{icon:"el-icon-edit"},on:{click:e.modifyPic}},[e._v("照片管理")]),a("el-dialog",{attrs:{title:"照片管理",visible:e.picManagerDialog},on:{"update:visible":function(t){e.picManagerDialog=t}}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("span",[e._v("客厅")]),a("el-upload",{attrs:{action:"http://localhost/picture/upload?appartmentId="+e.currentRow.apartmentId+"&type=Parlour","list-type":"picture-card","on-preview":e.handleParlourPreview,"on-remove":e.handleRemove,"on-success":e.success}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:e.dialogParlourVisible},on:{"update:visible":function(t){e.dialogParlourVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogParlourUrl,alt:""}})])],1),a("el-col",{attrs:{span:8}},[a("span",[e._v("厨房")]),a("el-upload",{attrs:{action:"http://localhost/picture/upload?appartmentId="+e.currentRow.apartmentId+"&type=Kitchen","list-type":"picture-card","on-preview":e.handleKitchenPreview,"on-success":e.success,"on-remove":e.handleRemove}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:e.dialogKitchenVisible},on:{"update:visible":function(t){e.dialogKitchenVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogKitchenUrl,alt:""}})])],1),a("el-col",{attrs:{span:8}},[a("span",[e._v("卧室")]),a("el-upload",{attrs:{action:"http://localhost/picture/upload?appartmentId="+e.currentRow.apartmentId+"&type=Bedroom","list-type":"picture-card","on-preview":e.handleBedroomPreview,"on-success":e.success,"on-remove":e.handleRemove}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:e.dialogBedroomVisible},on:{"update:visible":function(t){e.dialogBedroomVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogBedroomUrl,alt:""}})])],1)],1)],1)],1),a("el-col",{attrs:{span:3}},[a("el-button",{on:{click:function(t){return e.cancleClick()}}},[e._v("取消选择")])],1)],1)],1),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","element-loading-text":e.loadingText,"element-loading-background":"rgba(0, 0, 0, 0.8)","highlight-current-row":""},on:{"current-change":e.tableClick}},[a("el-table-column",{attrs:{prop:"apartmentId",label:"民宿id",align:"center",width:"100px",sortable:""}}),a("el-table-column",{attrs:{prop:"apartmentName",label:"民宿名",align:"center",width:"200px"}}),a("el-table-column",{attrs:{prop:"price",label:"单价",align:"center",width:"100px"}}),a("el-table-column",{attrs:{prop:"address",label:"地址",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{slot:"reference",size:"mini",icon:"el-icon-info",type:"info"},on:{click:function(a){return e.handleShowInfo(t.$index,t.row)}},slot:"reference"},[e._v("查看")]),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.showInfoLoading,expression:"showInfoLoading"}],attrs:{title:"详细信息",id:"showInfo",visible:e.showInfoDialog,center:"","close-on-click-modal":!1,"element-loading-text":e.loadingText,"element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"update:visible":function(t){e.showInfoDialog=t}}},[a("el-form",{attrs:{model:e.showInfo}},[a("el-form-item",{attrs:{label:"民宿名"}},[a("el-input",{attrs:{disabled:""},model:{value:e.showInfo.appartmentName,callback:function(t){e.$set(e.showInfo,"appartmentName",t)},expression:"showInfo.appartmentName"}})],1),a("el-form-item",{attrs:{label:"民宿类型"}},[a("el-input",{attrs:{disabled:""},model:{value:e.showInfo.typeName,callback:function(t){e.$set(e.showInfo,"typeName",t)},expression:"showInfo.typeName"}})],1),a("el-form-item",{attrs:{label:"民宿属性"}},[a("el-input",{attrs:{disabled:""},model:{value:e.showInfo.attrName,callback:function(t){e.$set(e.showInfo,"attrName",t)},expression:"showInfo.attrName"}})],1),a("el-form-item",{attrs:{label:"民宿类别"}},[a("el-input",{attrs:{disabled:""},model:{value:e.showInfo.className,callback:function(t){e.$set(e.showInfo,"className",t)},expression:"showInfo.className"}})],1),a("el-form-item",{attrs:{label:"民宿地点"}},[a("el-input",{attrs:{disabled:""},model:{value:e.showInfo.address,callback:function(t){e.$set(e.showInfo,"address",t)},expression:"showInfo.address"}})],1),a("el-form-item",{attrs:{label:"价格"}},[a("el-input",{attrs:{disabled:""},model:{value:e.showInfo.price,callback:function(t){e.$set(e.showInfo,"price",t)},expression:"showInfo.price"}})],1),a("el-form-item",{attrs:{label:"特殊功能"}},[a("el-input",{attrs:{disabled:""},model:{value:e.showInfo.valueName,callback:function(t){e.$set(e.showInfo,"valueName",t)},expression:"showInfo.valueName"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeShowInfo}},[e._v("关闭")])],1)],1),e._v(" \n          "),a("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-dialog",{attrs:{title:"编辑",visible:e.editDialog},on:{"update:visible":function(t){e.editDialog=t}}},[a("el-form",{attrs:{model:e.editForm}},[a("el-form-item",{attrs:{label:"修改民宿名"}},[a("el-input",{model:{value:e.editForm.appartmentName,callback:function(t){e.$set(e.editForm,"appartmentName",t)},expression:"editForm.appartmentName"}})],1),a("el-form-item",{attrs:{label:"修改价格"}},[a("el-input",{model:{value:e.editForm.price,callback:function(t){e.$set(e.editForm,"price",t)},expression:"editForm.price"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelModify}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmModify}},[e._v("确定")])],1)],1),e._v(" \n          "),a("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,e.tableData,t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-row",[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},ne=[],re=a("ef6c"),ie={findAllAppartments:function(e,t,a){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/appartment/getAll?limit="+e+"&page="+t,a)},getInfoByAppartmentId:function(e){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/appartment/getInfoByAppartmentId?appartmentId="+e)},deleteByPrimaryKey:function(e){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/appartment/deleteByPrimaryKey?appartmentId="+e)},update:function(e){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/appartment/update",e)},getAllClass:function(){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/appartmentClass/getAll")},getAllType:function(){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/appartmentType/getAll")},getAllAttr:function(e){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/appartmentAttr/getAll?classId="+e)},getValues:function(e){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/value/getValues?attrId="+e)},add:function(e){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/appartment/insert",e)}},se={name:"room",data:function(){return{loading:!0,loadingText:"加载中……",selectedOptions:[],options:re["regionDataPlus"],areas:re["regionDataPlus"],pageSize:"",total:0,currentPage:1,showInfoDialog:!1,showInfoLoading:!1,editDialog:!1,addAppartmentDialog:!1,picManagerDialog:!1,selectedAreas:[],addForm:{appartmentName:"",price:"",classId:"",typeId:"",attrId:"",valId:"",selectedAreas:"",stree:"",address:"",owner:""},classes:[{classId:"",className:""}],type:[{typeId:"",typeName:""}],attr:[{attrId:"0",attrName:"请先选择类别"}],values:[{valueId:"0",valueName:"请先选择属性"}],owners:[{accountId:"",accountName:""}],tableData:[{apartmentId:"",apartmentName:"",price:"",address:"",name:""}],searchForm:{appartmentName:"",address:"",beginPrice:"",endPrice:"",attrIds:[],typeIds:[]},showInfo:{apartmentName:"",typeName:"",attrName:"",className:"",address:"",price:"",valueName:""},editForm:{appartmentId:"",appartmentName:"",price:""},currentRow:{apartmentId:"",appartmentName:"",typeName:"",price:"",address:"",name:""},dialogParlourVisible:!1,dialogKitchenVisible:!1,dialogBedroomVisible:!1,dialogParlourUrl:"",dialogKitchenUrl:"",dialogBedroomUrl:""}},methods:{search:function(){window.console.log("search");var e="",t=this;t.loading=!0,t.loadingText="搜索中……";for(var a=0;a<this.selectedOptions.length;a++)"全部"===re["CodeToText"][this.selectedOptions[a]]?e+="":e+=re["CodeToText"][this.selectedOptions[a]];this.searchForm.address=e,ie.findAllAppartments(t.pageSize,1,t.searchForm).then(function(e){var a=e.data.data,o=e.data.count;t.total=o,t.tableData=a,t.loading=!1})},getAttr:function(e){window.console.log(e);var t=this;ie.getAllAttr(e).then(function(e){var a=e.data;t.attr=a})},getValues:function(e){window.console.log(e);var t=this;ie.getValues(e).then(function(e){var a=e.data;t.values=a})},add:function(){window.console.log("add"),this.addAppartmentDialog=!0;var e=this;ie.getAllClass().then(function(t){window.console.log(t.data),e.classes=t.data}),ie.getAllType().then(function(t){window.console.log(t.data),e.type=t.data}),p.fidndAllUsers(2,5,1,null,null,null).then(function(t){window.console.log(t.data.data),e.owners=t.data.data})},changeAreas:function(e){window.console.log(e),this.selectedAreas=e},addBtn:function(){window.console.log("add");for(var e="",t=0;t<this.selectedAreas.length;t++)"全部"===re["CodeToText"][this.selectedAreas[t]]?e+="":e+=re["CodeToText"][this.selectedAreas[t]];e+=this.addForm.stree,this.addForm.address=e,window.console.log(this.addForm);var a=this;ie.add(this.addForm).then(function(e){window.console.log(e),e.data<=0?a.$message.error("新增失败,请重试"):(a.addAppartmentDialog=!1,a.loadingText="新增中……",a.loading=!0,a.handleCurrentChange(a.currentPage),a.$message({type:"success",message:"新增成功"}))})},getAllAppartments:function(){var e=this;ie.findAllAppartments(5,1,this.searchForm).then(function(t){var a=t.data.data;e.tableData=a,e.loading=!1,e.total=t.data.count})},tableClick:function(e){this.currentRow=e,window.console.log(this.currentRow)},handleSizeChange:function(e){window.console.log(e);var t=this;t.loading=!0,ie.findAllAppartments(e,1,this.searchForm).then(function(e){var a=e.data.data,o=e.data.count;t.tableData=a,t.total=o,t.loading=!1})},handleCurrentChange:function(e){var t=this;t.loading=!0,window.console.log("当前页：",e),window.console.log("页面大小:",t.pageSize),ie.findAllAppartments(t.pageSize,e,t.searchForm).then(function(a){var o=a.data.data,l=a.data.count;t.tableData=o,t.total=l,t.currentPage=e,t.loading=!1})},handleShowInfo:function(e,t){window.console.log("查看"),this.showInfoLoading=!0,this.showInfoDialog=!0,this.loadingText="加载中……";var a=this;ie.getInfoByAppartmentId(t.apartmentId).then(function(e){window.console.log(t.apartmentId),window.console.log(e),a.showInfo=e.data,a.showInfoLoading=!1})},closeShowInfo:function(){this.showInfoDialog=!1,this.addAppartmentDialog=!1},handleEdit:function(e,t){window.console.log("编辑"),window.console.log("index==>",e),window.console.log("row==>",t),this.editDialog=!0,this.editForm.appartmentName=t.apartmentName,this.editForm.price=t.price,this.editForm.appartmentId=t.apartmentId},handleDelete:function(e,t,a){var o=this;window.console.log("删除"),window.console.log("index==>",e),this.$confirm("确定删除？","确认",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(function(){t.splice(e,1),window.console.log(a.apartmentId),ie.deleteByPrimaryKey(a.apartmentId),o.$message({type:"success",message:"删除成功！"})}).catch(function(){o.$message({type:"info",message:"已取消删除"})})},handleChange:function(e){window.console.log(e),this.selectedOptions=e},confirmModify:function(){window.console.log("修改"),window.console.log(this.editForm);var e=this;ie.update(this.editForm).then(function(t){window.console.log(t.data),e.loading=!0,e.loadingText="更新中……",e.getAllAppartments(5,1,e.searchForm),1===t.data?e.$message({message:"修改成功",type:"success"}):e.$message.error("修改失败"),e.handleCurrentChange(e.currentPage),e.editDialog=!1})},cancelModify:function(){window.console.log("取消"),this.$message("取消修改"),this.editDialog=!1},modifyPic:function(){window.console.log("照片管理"),null!=this.currentRow.apartmentId&&""!=this.currentRow.apartmentId?this.picManagerDialog=!0:this.$notify.error({title:"错误",message:"请选择表格中的一列"}),window.console.log(this.picManagerDialog),window.console.log(this.currentRow)},handleParlourPreview:function(e){window.console.log("file==>",e),this.dialogParlourVisible=!0,this.dialogParlourUrl=e.url},handleKitchenPreview:function(e){window.console.log("file==>",e),this.dialogKitchenVisible=!0,this.dialogKitchenUrl=e.url},handleBedroomPreview:function(e){window.console.log("file==>",e),this.dialogBedroomVisible=!0,this.dialogBedroomUrl=e.url},handleRemove:function(e,t){window.console.log("fileList==>",t)},cancleClick:function(e){this.$refs.singleTable.setCurrentRow(e)},success:function(e,t,a){window.console.log(e),window.console.log("file==>",t),window.console.log("fileList==>",a),e<=0?this.$message.error("上传失败"):this.$message({type:"success",message:"上传成功"})}},mounted:function(){this.getAllAppartments()}},ce=se,de=Object(b["a"])(ce,le,ne,!1,null,null,null),ue=de.exports,me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("年度业绩")])]),a("ve-line",{attrs:{data:e.yearCharData}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("月度业绩")]),a("el-select",{staticStyle:{float:"right"},attrs:{placeholder:"请选择"},on:{change:e.change},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("ve-line",{attrs:{data:e.monthCharData}})],1)])],1)],1)],1)},pe=[],fe=(a("6b54"),{getYears:function(){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/order/getYears")},getSumByYear:function(){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/order/getSumByYear")},getSumByMonth:function(e){return c.a.defaults.withCredentials=!0,c.a.post("http://localhost/order/getSumByMonth?year="+e)}}),ge={name:"index",data:function(){return{options:[{value:"",label:""}],value:"",yearCharData:{columns:["year","sum"],rows:[{}]},monthCharData:{columns:["month","sum"],rows:[{}]}}},methods:{getYears:function(){var e=this;fe.getYears().then(function(t){window.console.log("res=>",t);for(var a=t.data,o=[],l=0;l<a.length;l++)o.push({value:a[l],label:a[l]});window.console.log("ops",o);var n=new Date,r=n.getFullYear();e.value=r,e.options=o})},getSumByYear:function(){var e=this;fe.getSumByYear().then(function(t){window.console.log("res=>",t);for(var a=[],o=0;o<t.data.length;o++)a.push({year:t.data[o].year.toString(),sum:t.data[o].sum});window.console.log("rs",a),e.yearCharData.rows=a,window.console.log("yearCharData=>",e.yearCharData)})},getSumByMonth:function(e){var t=this;fe.getSumByMonth(e).then(function(e){for(var a=[],o=0;o<e.data.length;o++)a.push({month:e.data[o].month.toString(),sum:e.data[o].sum});t.monthCharData.rows=a})},change:function(e){window.console.log("change",e),this.value=e,this.getSumByMonth(e)}},mounted:function(){this.getYears(),this.getSumByYear();var e=new Date,t=e.getFullYear();this.getSumByMonth(t)}},he=ge,be=Object(b["a"])(he,me,pe,!1,null,null,null),we=be.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{type:"text",placeholder:"请输入用户名",clearable:""},model:{value:e.accountName,callback:function(t){e.accountName=t},expression:"accountName"}})],1),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{type:"text",placeholder:"请输入姓名",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{type:"text",placeholder:"请输入电话号码",clearable:""},model:{value:e.telphone,callback:function(t){e.telphone=t},expression:"telphone"}})],1),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{icon:"el-icon-search",circle:""},on:{click:e.search}})],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{icon:"el-icon-plus",circle:""},on:{click:e.add}}),a("el-dialog",{staticStyle:{top:"-120px"},attrs:{title:"新增管理员",id:"modify",visible:e.addDialog,center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.addDialog=t}}},[a("el-form",{ref:"formAddRule",attrs:{model:e.formAdd,rules:e.rules}},[a("el-form-item",{attrs:{label:"账户名",prop:"accountName"}},[a("el-input",{model:{value:e.formAdd.accountName,callback:function(t){e.$set(e.formAdd,"accountName",t)},expression:"formAdd.accountName"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:e.formAdd.password,callback:function(t){e.$set(e.formAdd,"password",t)},expression:"formAdd.password"}})],1),a("el-form-item",{attrs:{label:"真实姓名",prop:"name"}},[a("el-input",{model:{value:e.formAdd.name,callback:function(t){e.$set(e.formAdd,"name",t)},expression:"formAdd.name"}})],1),a("el-form-item",{attrs:{label:"身份证号码",prop:"idNumber"}},[a("el-input",{model:{value:e.formAdd.idNumber,callback:function(t){e.$set(e.formAdd,"idNumber",t)},expression:"formAdd.idNumber"}})],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:e.formAdd.gender,callback:function(t){e.$set(e.formAdd,"gender",t)},expression:"formAdd.gender"}},[a("el-radio",{attrs:{label:"男"}}),a("el-radio",{attrs:{label:"女"}})],1)],1),a("el-form-item",{attrs:{label:"出生日期"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.formAdd.birth,callback:function(t){e.$set(e.formAdd,"birth",t)},expression:"formAdd.birth"}})],1)],1),a("el-form-item",{attrs:{label:"电话号码",prop:"telphone"}},[a("el-input",{model:{value:e.formAdd.telphone,callback:function(t){e.$set(e.formAdd,"telphone",e._n(t))},expression:"formAdd.telphone"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancleAdd}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmAdd("formAddRule")}}},[e._v("确 定")])],1)],1)],1)],1),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","element-loading-text":e.loadingText,"element-loading-background":"rgba(0, 0, 0, 0.8)","default-sort":{prop:"accountId",order:"ascending"}}},[a("el-table-column",{attrs:{prop:"accountId",label:"账户id",align:"center",width:"150",sortable:""}}),a("el-table-column",{attrs:{prop:"accountName",label:"账户名",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"gender",label:"性别",align:"center",width:"100"}}),a("el-table-column",{attrs:{prop:"birth",label:"出生日期",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"telephone",label:"电话号码",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"remainderMoney",label:"余额",align:"center",width:"150"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left",title:"身份证号码",trigger:"click"}},[a("el-input",{attrs:{disabled:""},model:{value:e.idNumber,callback:function(t){e.idNumber=t},expression:"idNumber"}}),a("el-button",{attrs:{slot:"reference",size:"mini",icon:"el-icon-info",type:"info"},on:{click:function(a){return e.showIdNumber(t.$index,t.row)}},slot:"reference"},[e._v("查看")])],1),e._v(" \n          "),a("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-dialog",{staticStyle:{top:"-120px"},attrs:{title:"修改信息",id:"modify",visible:e.dialogFormVisible,center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"账户id"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.accountId,callback:function(t){e.$set(e.form,"accountId",t)},expression:"form.accountId"}})],1),a("el-form-item",{attrs:{label:"账户名"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.accountName,callback:function(t){e.$set(e.form,"accountName",t)},expression:"form.accountName"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"真实姓名"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[a("el-radio",{attrs:{label:"男"}}),a("el-radio",{attrs:{label:"女"}})],1)],1),a("el-form-item",{attrs:{label:"出生日期"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",clearable:""},model:{value:e.form.birth,callback:function(t){e.$set(e.form,"birth",t)},expression:"form.birth"}})],1)],1),a("el-form-item",{attrs:{label:"电话号码"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.telphone,callback:function(t){e.$set(e.form,"telphone",t)},expression:"form.telphone"}})],1),a("el-form-item",{attrs:{label:"余额"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.remainderMoney,callback:function(t){e.$set(e.form,"remainderMoney",t)},expression:"form.remainderMoney"}})],1),a("el-form-item",{attrs:{label:"状态",hidden:""}},[a("el-input",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancleModify}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmModify}},[e._v("确 定")])],1)],1),e._v(" \n          "),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row,e.tableData)}}},[e._v("删除")])]}}])})],1)],1),a("el-row",[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},ye=[],xe={name:"manager",data:function(){return{tableData:[{accountId:"",accountName:"",name:"",gender:"",birth:"",telephone:"",remainderMoney:""}],currentPage:1,total:0,pageSize:"",loading:!0,loadingText:"加载中……",accountName:"",name:"",telphone:"",idNumber:"",form:{accountId:"",accountName:"",name:"",gender:"",birth:"",telphone:"",remainderMoney:"",password:""},formAdd:{accountId:"",accountName:"",name:"",gender:"",birth:"",telphone:"",remainderMoney:"",password:""},dialogFormVisible:!1,addDialog:!1,rules:{accountName:[{required:!0,message:"请输入账户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:15,message:"请输入正确的真实姓名，长度在2-15个字符",trigger:"blur"}],idNumber:[{required:!0,message:"请输入身份证信息",trigger:"blur"},{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"请输入正确的身份证号码",trigger:"blur"}],telphone:[{required:!0,message:"请输入电话号码",trigger:"blur"},{type:"number",message:"请输入正确的电话号码",trigger:"blur"}]}}},methods:{customerTable:function(){var e=this;p.findAllUsers(1,5,1,null,null,null).then(function(t){var a=t.data.data,o=t.data.count;window.console.log("total==>",o),window.console.log(a),e.tableData=a,e.total=o,e.idNumber=t.data.data.idNumber,e.pageSize=5,e.loading=!1})},handleCurrentChange:function(e){var t=this;t.loading=!0,window.console.log("当前页：",e),window.console.log("页面大小:",t.pageSize),p.findAllUsers(1,t.pageSize,e,null,null,null).then(function(a){var o=a.data.data,l=a.data.count;t.tableData=o,t.total=l,t.currentPage=e,t.loading=!1})},handleSizeChange:function(e){window.console.log(e);var t=this;t.loading=!0,p.findAllUsers(1,e,1,null,null,null).then(function(a){var o=a.data.data,l=a.data.count;t.tableData=o,t.total=l,t.pageSize=e,t.loading=!1})},search:function(){var e=this;e.loading=!0,p.findAllUsers(1,e.pageSize,1,this.accountName,this.name,this.telphone).then(function(t){var a=t.data.data,o=t.data.count;e.tableData=a,e.total=o,e.loading=!1})},add:function(){window.console.log("add"),this.addDialog=!0},confirmAdd:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;window.console.log("确认添加");var a=t;p.addUser(t.formAdd,"3").then(function(e){window.console.log("res==>",e),a.loadingText="新增中……",a.customerTable(),e.data>0?(window.console.log("添加成功"),a.$message({message:"添加成功",type:"success"}),a.addDialog=!1):a.$message.error("添加失败")})})},cancleAdd:function(){window.console.log("取消"),this.addDialog=!1},showIdNumber:function(e,t){var a=this;a.idNumber=t.idNumber},handleEdit:function(e,t){window.console.log("index==>",e),window.console.log("row==>",t),this.dialogFormVisible=!0,this.form.accountId=t.accountId,this.form.accountName=t.accountName,this.form.birth=t.birth,this.form.gender=t.gender,this.form.idNumber=t.idNumber,this.form.name=t.name,this.form.remainderMoney=t.remainderMoney,this.form.telphone=t.telephone,this.form.password=t.password,this.form.birth=t.birth},confirmModify:function(){window.console.log("确认修改");var e=this;p.modifyUsers(this.form).then(function(){e.loading=!0,e.loadingText="修改中……",e.handleCurrentChange(e.currentPage),e.dialogFormVisible=!1}),e.$message({message:"修改成功",type:"success"})},cancleModify:function(){window.console.log("取消修改"),this.dialogFormVisible=!1},handleDelete:function(e,t,a){window.console.log("index==>",e),window.console.log("row==>",t);var o=this;this.$confirm("确认删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.form.accountId=t.accountId,o.form.status=1,o.form.accountName=t.accountName,o.form.gender=t.gender,o.form.birth=t.birth,o.form.telphone=t.telphone,o.form.remainderMoney=t.remainderMoney,o.form.password=t.password,o.form.name=t.name,window.console.log(o.form),p.modifyUsers(o.form).then(function(){a.splice(e,1)}),o.$message({type:"success",message:"删除成功"})}).catch(function(){o.$message({type:"info",message:"取消删除"})})}},mounted:function(){this.customerTable()}},ke=xe,Ne=Object(b["a"])(ke,ve,ye,!1,null,null,null),Ae=Ne.exports;o["default"].use(M["a"]);var Ie=new M["a"]({routes:[{path:"/index",name:"index",component:we},{path:"/customer",name:"customer",component:V},{path:"/seller",name:"seller",component:E},{path:"/message",name:"message",component:J},{path:"/order",name:"order",component:oe},{path:"/room",name:"room",component:ue},{path:"/manager",name:"manager",component:Ae}]}),$e=a("c3da"),Fe=a.n($e);$["a"].library.add(F["a"]),$["a"].library.add(C["a"]),$["a"].library.add(D["a"]),o["default"].config.productionTip=!1,o["default"].use(I.a),o["default"].component(Fe.a.name,Fe.a),o["default"].use("/api",function(e,t,a){t.setHeader("Access-Control-Allow-Origin","http://localhost:8080"),t.setHeader("Access-Control-Allow-Credentials","true"),t.setHeader("Access-Control-Allow-Methods","POST, GET, PATCH, DELETE, PUT"),t.setHeader("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),a()}),new o["default"]({render:function(e){return e(N)},router:Ie}).$mount("#app")},"95ac":function(e,t,a){}});
//# sourceMappingURL=app.3918951b.js.map